<workflowGraph name="">
    <param name="abbrev"/>
    <param name="orthomclClade"/>
    <param name="ncbiTaxonId"/>
    <param name="oldAbbrevsList"/>
    <param name="oldReleasesSequenceFilesDir"/>
    <param name="oldReleasesGroupFilesDir"/>
    <param name="residualFastaFilesDir"/>
    <param name="proteomeDatasetsDir"/>
<!--
    <step name="insertPeripheralTaxon" stepClass="OrthoMCLWorkflow::Main::WorkflowSteps::InsertPeripheralTaxon">
      <paramValue name="abbrev">$$abbrev$$</paramValue>
      <paramValue name="orthomclClade">$$orthomclClade$$</paramValue> 
      <paramValue name="ncbiTaxonId">$$ncbiTaxonId$$</paramValue> 
    </step>
-->
    <subgraph name="loadProteome" xmlFile="loadDataset.xml">
      <paramValue name="datasetName">$$abbrev$$_orthomclPeripheralProteome_RSRC</paramValue>
      <paramValue name="datasetLoaderXmlFileName">OrthoMCL.xml</paramValue>
      <paramValue name="parentDataDir">$$proteomeDatasetsDir$$</paramValue>
    </subgraph>
<!--
    <step name="mapPreviousSeqIDs" stepClass="OrthoMCLWorkflow::Main::WorkflowSteps::MapAndInsertPrevSeqIDs">
      <paramValue name="abbrev">$$abbrev$$</paramValue>
      <paramValue name="oldAbbrevsList">$$oldAbbrevsList$$</paramValue>
      <paramValue name="inputDir">$$oldReleasesSequenceFilesDir$$</paramValue>
      <depends name="loadProteome"/>
    </step>

    <step name="mapPreviousGroupIDs" stepClass="OrthoMCLWorkflow::Main::WorkflowSteps::MapAndInsertPrevGroupIDs">
      <paramValue name="abbrev">$$abbrev$$</paramValue>
      <paramValue name="oldAbbrevsList">$$oldAbbrevsList$$</paramValue>
      <paramValue name="inputDir">$$oldReleasesGroupFilesDir$$</paramValue>
      <depends name="mapPreviousSeqIDs"/>
    </step>
-->
<!--
    <step name="makeGoodPeripheralProteins" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::OrthomclMakeGoodPeripheralProteins">
    <paramValue name="fastaDir">$$proteomeDatasetsDir$$/$$abbrev$$_orthomclPeripheralProteome_RSRC</paramValue>
    <paramValue name="fastaFile">$$abbrev$$Proteome.fasta</paramValue>
    <paramValue name="goodFastaFile">$$abbrev$$ProteomeGood.fasta</paramValue>
    <paramValue name="poorFastaFile">$$abbrev$$ProteomePoor.fasta</paramValue>
    <paramValue name="minLength">10</paramValue>
    <paramValue name="maxStopPercent">20</paramValue>
    <paramValue name="abbrev">$$abbrev$$</paramValue>
    <depends name="loadProteome"/>
  </step>
-->
<!-- This should be removed. Will be done later in the dataset class of orthomclGetPeripheralProteins.
  <step name="mirrorProteomeDirToCluster" stepClass="ReFlow::StepClasses::MirrorToComputeCluster">
    <paramValue name="fileOrDirToMirror">$$proteomeDatasetsDir$$/$$abbrev$$_orthomclPeripheralProteome_RSRC</paramValue>
    <depends name="loadProteome"/>
  </step>
-->
<!--
  <step name="mirrorFastaFileToCluster" stepClass="ReFlow::StepClasses::MirrorToComputeCluster">
    <paramValue name="fileOrDirToMirror">$$proteomeDatasetsDir$$/$$abbrev$$_orthomclPeripheralProteome_RSRC/$$abbrev$$.fasta</paramValue>
    <depends name="mirrorProteomeDirToCluster"/>
  </step>
  <step name="makeInterproDir" stepClass="ReFlow::StepClasses::MakeDataDir">
    <paramValue name="dataDir">$$proteomeDatasetsDir$$/$$abbrev$$_orthomclPeripheralProteome_RSRC/Interpro</paramValue>
    <depends name="mirrorFastaFileToCluster"/>
  </step>

  <step name="mirrorInterproDirToCluster" stepClass="ReFlow::StepClasses::MirrorToComputeCluster">
    <paramValue name="fileOrDirToMirror">$$proteomeDatasetsDir$$/$$abbrev$$_orthomclPeripheralProteome_RSRC/Interpro</paramValue>
    <depends name="makeInterproDir"/>
  </step>
  
  <subgraph name="InterproScan" xmlFile="interpro.xml">
    <paramValue name="proteinsFile">$$proteomeDatasetsDir$$/$$abbrev$$_orthomclPeripheralProteome_RSRC/$$abbrev$$.fasta</paramValue>
    <paramValue name="parentDataDir">$$proteomeDatasetsDir$$/$$abbrev$$_orthomclPeripheralProteome_RSRC/Interpro</paramValue>
    <paramValue name="insertVersion">2</paramValue>
    <paramValue name="aaSeqTable">ExternalAASequence</paramValue>
    <paramValue name="sourceIdRegex">^\w+\|(\S+)</paramValue>
    <depends name="mirrorInterproDirToCluster"/>    
  </subgraph>
-->
</workflowGraph>
